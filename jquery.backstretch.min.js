/*
 * Backstretch
 * http://srobbin.com/jquery-plugins/backstretch/
 *
 * Copyright (c) 2013 Scott Robbin
 * Licensed under the MIT license.
 *
 * Fork Version: 2.4
 * Fork Maintained By:
 * Mike Kormendy
 * https://github.com/mkormendy/jquery-backstretch
 * http://mikekormendy.com
 * http://somethinginteractive.com
 *
 * Caption Support:
 * Sebastian Sulinski
 * https://github.com/sebastiansulinski/jquery-backstretch
 * http://ssdtutorials.com
 *
 */
;!function(t,e,i){"use strict";t.fn.backstretch=function(n,s){return(n===i||0===n.length)&&t.error("No images were supplied for Backstretch"),0===t(e).scrollTop()&&e.scrollTo(0,0),this.each(function(){var e=t(this),i=e.data("backstretch");if(i){if("string"==typeof n&&"function"==typeof i[n])return void i[n](s);s=t.extend(i.options,s),i.destroy(!0)}i=new a(this,n,s||{}),e.data("backstretch",i)})},t.backstretch=function(e,i){return t("body").backstretch(e,i).data("backstretch")},t.expr[":"].backstretch=function(e){return t(e).data("backstretch")!==i},t.fn.backstretch.defaults={centeredX:!0,centeredY:!0,duration:5e3,fade:0,paused:!1,lazyload:!1,start:0,captionAppendTo:"body",dataCaption:"bootstrap-image",dataCaptionIndexSeparator:"_",captionHideClass:"hide"};var n={wrap:{left:0,top:0,overflow:"hidden",margin:0,padding:0,height:"100%",width:"100%",zIndex:-999999},img:{position:"absolute",display:"none",margin:0,padding:0,border:"none",width:"auto",height:"auto",maxHeight:"none",maxWidth:"none",zIndex:-999999}},a=function(i,a,o){this.options=t.extend({},t.fn.backstretch.defaults,o||{});var r=this;r.images=t.isArray(a)?a:[a],r.options.paused&&(r.paused=!0),r.options.start>=r.images.length&&(r.options.start=r.images.length-1),r.options.start<0&&(r.options.start=0),o.lazyload&&r.images[r.options.start]?t.each(r.images,function(e,i){"object"==typeof r.images[e]?(t("<img />")[0].src=r.images[r.options.start].src,"undefined"!=typeof r.images[e].caption?r.appendCaption(e,i.src,i.caption):r.appendCaption(e,i.src,"")):t("<img />")[0].src=r.images[r.options.start]}):t.each(r.images,function(e,i){"object"==typeof r.images[e]?(t("<img />")[0].src=i.src,"undefined"!=typeof r.images[e].caption&&r.appendCaption(e,i.src,i.caption)):t("<img />")[0].src=this}),r.isBody=i===document.body,r.$container=t(i),r.$root=r.isBody?t(s?e:document):r.$container;var c=r.$container.children(".backstretch").first();if(r.$wrap=c.length?c:t('<div class="backstretch"></div>').css(n.wrap).appendTo(r.$container),!r.isBody){var d=r.$container.css("position"),h=r.$container.css("zIndex");r.$container.css({position:"static"===d?"relative":d,zIndex:"auto"===h?0:h,background:"none"}),r.$wrap.css({zIndex:-999998})}r.$wrap.css({position:r.isBody&&s?"fixed":"absolute"}),r.index=r.options.start,r.show(r.index),t(e).on("resize.backstretch",t.proxy(r.resize,r)).on("orientationchange.backstretch",t.proxy(function(){r.isBody&&0===e.pageYOffset&&(e.scrollTo(0,1),r.resize)},r))};a.prototype={resize:function(){try{var t,i,n=this,a=n.index,s={left:0,top:0},r=Math.ceil(e.innerWidth/e.innerHeight)>Math.ceil(screen.width/screen.height),c=this.isBody?o?r?screen.height:screen.width:this.$root.width():this.$root.innerWidth(),d=c,h=this.isBody?o?r?screen.width:screen.height:e.innerHeight?e.innerHeight:this.$root.height():this.$root.innerHeight(),p=d/this.$img.data("ratio"),f="object"==typeof n.images[a]?n.images[a]:this.options;if(isNaN(p))return this;p>=h?(this.options.centeredY&&"undefined"==typeof f.offsetY?t=(p-h)/2:f.offsetY&&(i=h-p,t=0-i*f.offsetY),t&&(s.top=0-t+"px")):(p=h,d=p*this.$img.data("ratio"),this.options.centeredX&&"undefined"==typeof f.offsetX?t=(d-c)/2:f.offsetX&&(i=c-d,t=0-i*f.offsetX),t&&(s.left=0-t+"px")),this.$wrap.css({width:c,height:h}).find("img:not(.deleteable)").css({width:d,height:p}).css(s)}catch(g){}},show:function(e){if(!(Math.abs(e)>this.images.length-1)){var i=this,a=this.index,s=i.$wrap.find("img").addClass("deleteable"),o={relatedTarget:i.$container[0]};return i.$container.trigger(t.Event("backstretch.before",o),[i,e]),i.index=e,clearInterval(i.interval),"object"==typeof i.images[e]&&i.updateCaption(a,i.index,i.images[e].caption),i.$img=t("<img />").css(n.img).bind("load",function(n){var a=this.width||t(n.target).width(),r=this.height||t(n.target).height();t(this).data("ratio",a/r),t(this).fadeIn(i.options.speed||i.options.fade,function(){s.remove(),i.paused||i.cycle(),t(["after","show"]).each(function(){i.$container.trigger(t.Event("backstretch."+this,o),[i,e])})}),i.resize(e)}).appendTo(i.$wrap),"object"!=typeof i.images[e]?i.$img.attr("src",i.images[e]):"string"==typeof i.images[e].src&&i.$img.attr("src",i.images[e].src),i}},next:function(){return this.show(this.index<this.images.length-1?this.index+1:0)},prev:function(){return this.show(0===this.index?this.images.length-1:this.index-1)},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this.next(),this},cycle:function(){return this.images.length>1&&(clearInterval(this.interval),this.interval=setInterval(t.proxy(function(){this.paused||this.next()},this),this.options.duration)),this},destroy:function(i){t(e).off("resize.backstretch orientationchange.backstretch"),clearInterval(this.interval),i||this.$wrap.remove(),this.$container.removeData("backstretch")},appendCaption:function(e,i,n){var a='<div style="display: none;" data-';a+=this.options.dataCaption,a+='="',a+=i+this.options.dataCaptionIndexSeparator+e,a+='"',a+=0!=e?' class="'+this.options.captionHideClass+'"':"",a+=">",a+=n,a+="</div>",t(this.options.captionAppendTo).append(a)},updateCaption:function(e,i,n){var a=this,s=a.images[e].src+a.options.dataCaptionIndexSeparator+e,o=a.images[i].src+a.options.dataCaptionIndexSeparator+i,r=this.options.fade;t("[data-"+a.options.dataCaption+'="'+s+'"]').fadeOut(r/2,function(){t(this).addClass(a.options.captionHideClass),"undefined"==typeof n?t("[data-"+a.options.dataCaption+'="'+o+'"]').removeClass(a.options.captionHideClass):t("[data-"+a.options.dataCaption+'="'+o+'"]').fadeIn(r/2).removeClass(a.options.captionHideClass)})}};var s=function(){var t=navigator.userAgent,i=navigator.platform,n=t.match(/AppleWebKit\/([0-9]+)/),a=!!n&&n[1],s=t.match(/Fennec\/([0-9]+)/),o=!!s&&s[1],r=t.match(/Opera Mobi\/([0-9]+)/),c=!!r&&r[1],d=t.match(/MSIE ([0-9]+)/),h=!!d&&d[1];return!((i.indexOf("iPhone")>-1||i.indexOf("iPad")>-1||i.indexOf("iPod")>-1)&&a&&534>a||e.operamini&&"[object OperaMini]"==={}.toString.call(e.operamini)||r&&7458>c||t.indexOf("Android")>-1&&a&&533>a||o&&6>o||"palmGetResource"in e&&a&&534>a||t.indexOf("MeeGo")>-1&&t.indexOf("NokiaBrowser/8.5.0")>-1||h&&6>=h)}(),o=navigator.userAgent.match(/Mobi/i)}(jQuery,window);